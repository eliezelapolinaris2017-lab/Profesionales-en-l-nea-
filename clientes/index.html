<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Registro ServiciosPRO</title>
  <style>
    body{margin:0;background:#0b0f16;color:#e6edf3;font:15px system-ui,Segoe UI,Roboto,Arial}
    .card{max-width:720px;margin:22px auto;padding:18px;border:1px solid #1f2a3a;border-radius:16px;background:#0f1525}
    h2{margin:0 0 12px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    input,textarea{width:100%;padding:12px;border:1px solid #25314a;border-radius:12px;background:#0c1220;color:#e6edf3}
    label{display:block;margin:8px 0 4px;color:#cdd9e5}
    button{padding:10px 14px;border-radius:12px;border:1px solid #6a5f00;background:#ffd21f;color:#151515;cursor:pointer}
    .hint{color:#9aa4b2;font-size:12px}
    .ok{color:#9be28f}.err{color:#ff8a8a}
  </style>
</head>
<body>
  <!-- Form de cara al usuario -->
  <main class="card">
    <h2>Registra tu perfil</h2>
    <form id="fakeForm" autocomplete="on" novalidate>
      <div class="row">
        <label for="f_name">Nombre</label>
        <input id="f_name" required placeholder="Nombre completo">

        <label for="f_phone">Teléfono</label>
        <input id="f_phone" placeholder="787-xxx-xxxx">

        <label for="f_category">Categoría</label>
        <input id="f_category" placeholder="Ej: Jardinería, Plomería…">

        <label for="f_town">Pueblo</label>
        <input id="f_town" placeholder="Ej: Caguas">

        <label for="f_services">Servicios</label>
        <textarea id="f_services" placeholder="Separa por coma: poda, instalación, mantenimiento…"></textarea>

        <label for="f_bio">Descripción</label>
        <textarea id="f_bio" placeholder="Breve descripción de tus servicios"></textarea>

        <label for="f_photo">Foto (URL pública)</label>
        <input id="f_photo" placeholder="Pega enlace público de Drive o imagen (https://...)">

        <label style="margin-top:10px">
          <input type="checkbox" id="f_active"> Activo
        </label>
      </div>

      <p class="hint">Al enviar, se guarda directo en Google Sheets (el Form no se muestra).</p>
      <button type="submit">Enviar</button>
      <span id="msg" class="hint"></span>
    </form>
  </main>

  <!-- Iframe oculto para no navegar al Form -->
  <iframe name="gform_target" style="display:none"></iframe>

  <!-- Form real oculto que postea al Google Form -->
  <form id="realForm"
        action="https://docs.google.com/forms/d/e/1FAIpQLSfGYVjQ9c_m62P4w63Xogh4TZz-GXEKm8C_EGo6E1DXsE6jeQ/formResponse"
        method="POST" target="gform_target" style="display:none">
    <input name="entry.282028096"   id="r_name">        <!-- Nombre -->
    <input name="entry.1549441983"  id="r_phone">       <!-- Teléfono -->
    <input name="entry.498272206"   id="r_category">    <!-- Categoría -->
    <input name="entry.1139449627"  id="r_town">        <!-- Pueblo -->
    <input name="entry.388848904"   id="r_services">    <!-- Servicios -->
    <input name="entry.1516848589"  id="r_bio">         <!-- Descripción -->
    <input name="entry.29049297"    id="r_photo">       <!-- Foto (URL) -->
    <input name="entry.680317466"   id="r_active">      <!-- Activo -->
  </form>

  <script>
  const msg = document.getElementById('msg');

  function cleanUrl(u){
    if(!u) return '';
    u = String(u).trim();
    if(/^http:\/\//i.test(u)) u = u.replace(/^http:\/\//i,'https://');
    return u;
  }

  document.getElementById('fakeForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    msg.textContent = 'Enviando…'; msg.className = 'hint';

    // Copiar al form real
    document.getElementById('r_name').value     = document.getElementById('f_name').value.trim();
    document.getElementById('r_phone').value    = document.getElementById('f_phone').value.trim();
    document.getElementById('r_category').value = document.getElementById('f_category').value.trim();
    document.getElementById('r_town').value     = document.getElementById('f_town').value.trim();
    document.getElementById('r_services').value = document.getElementById('f_services').value.trim();
    document.getElementById('r_bio').value      = document.getElementById('f_bio').value.trim();
    document.getElementById('r_photo').value    = cleanUrl(document.getElementById('f_photo').value);
    // Para “Activo” tu form espera el texto "activo" cuando está marcado (según tu inspector)
    document.getElementById('r_active').value   = document.getElementById('f_active').checked ? 'activo' : '';

    // Enviar en background
    document.getElementById('realForm').submit();

    // Feedback y reset
    setTimeout(()=>{
      msg.textContent = '¡Enviado! ✅';
      msg.className = 'hint ok';
      document.getElementById('fakeForm').reset();
    }, 600);
  });
  </script>
</body>
</html>
