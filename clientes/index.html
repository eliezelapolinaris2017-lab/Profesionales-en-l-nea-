<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Registro ServiciosPRO</title>
<style>
  body{margin:0;background:#0b0f16;color:#e6edf3;font:15px system-ui,Segoe UI,Roboto,Arial}
  .card{max-width:720px;margin:22px auto;padding:18px;border:1px solid #1f2a3a;border-radius:16px;background:#0f1525}
  input,textarea{width:100%;padding:12px;border:1px solid #25314a;border-radius:12px;background:#0c1220;color:#e6edf3}
  label{display:block;margin:8px 0 4px;color:#cdd9e5}
  button{padding:10px 14px;border-radius:12px;border:1px solid #6a5f00;background:#ffd21f;color:#151515;cursor:pointer}
  .hint{color:#9aa4b2;font-size:12px}.ok{color:#9be28f}.err{color:#ff8a8a}
</style>
</head>
<body>
  <main class="card">
    <h2>Registra tu perfil</h2>
    <form id="ui" novalidate>
      <label>Nombre*</label>
      <input id="f_name" required>
      <label>Teléfono</label>
      <input id="f_phone">
      <label>Categoría</label>
      <input id="f_category">
      <label>Pueblo</label>
      <input id="f_town">
      <label>Servicios</label>
      <textarea id="f_services"></textarea>
      <label>Descripción</label>
      <textarea id="f_bio"></textarea>
      <label>Foto (URL pública)</label>
      <input id="f_photo" placeholder="https://...">
      <label style="margin-top:10px"><input type="checkbox" id="f_active"> Activo</label>
      <p class="hint" id="msg"></p>
      <button type="submit">Enviar</button>
    </form>
  </main>

<script>
const FORM_ACTION = "https://docs.google.com/forms/d/e/1FAIpQLSfGYVjQ9c_m62P4w63Xogh4TZz-GXEKm8C_EGo6E1DXsE6jeQ/formResponse";

// utilidades
const $ = s => document.querySelector(s);
function https(u){ if(!u) return ""; u = String(u).trim(); return u.replace(/^http:\/\//i,"https://"); }
function fbzx(){ return Math.random().toString(36).slice(2)+Date.now().toString(36); }

$("#ui").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const msg = $("#msg");
  msg.textContent = "Enviando…"; msg.className = "hint";

  // Valida lo mínimo que sea requerido en tu Form (si un campo es obligatorio allá, márcalo aquí también)
  if(!$("#f_name").value.trim()){ msg.textContent="Pon el Nombre"; msg.className="hint err"; return; }

  const fd = new FormData();
  // tus entries EXACTOS
  fd.append("entry.282028096",  $("#f_name").value.trim());
  fd.append("entry.1549441983", $("#f_phone").value.trim());
  fd.append("entry.498272206",  $("#f_category").value.trim());
  fd.append("entry.1139449627", $("#f_town").value.trim());
  fd.append("entry.388848904",  $("#f_services").value.trim());
  fd.append("entry.1516848589", $("#f_bio").value.trim());
  fd.append("entry.29049297",   https($("#f_photo").value));
  fd.append("entry.680317466",  $("#f_active").checked ? "activo" : "");

  // tokens que muchos forms piden
  fd.append("fvv", "1");
  fd.append("draftResponse", "[]");
  fd.append("pageHistory", "0"); // si tu form tiene varias secciones, cámbialo a "0,1,..."
  fd.append("fbzx", fbzx());
  // algunos forms incluyen "dlut" en el DOM; si lo ves, puedes enviar:
  // fd.append("dlut", Date.now().toString());

  try{
    // no-cors: el browser no te devuelve estado, pero el envío se hace
    await fetch(FORM_ACTION, { method:"POST", mode:"no-cors", body:fd });
    msg.textContent = "¡Enviado! ✅ Revisa tu hoja en unos segundos.";
    msg.className = "hint ok";
    $("#ui").reset();
  }catch(err){
    msg.textContent = "Error al enviar: "+err.message;
    msg.className = "hint err";
  }
});
</script>
</body>
</html>
