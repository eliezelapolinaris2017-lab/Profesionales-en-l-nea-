<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Editor de data.json · Servicios Pro</title>
<style>
:root{--bg:#0d1117;--panel:#0f172a;--ink:#e6edf3;--muted:#9aa4b2;--acc:#ffd21f;--line:#273246;--r:14px}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:#0b0f16;color:var(--ink);font:15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial}
header{position:sticky;top:0;background:#0b1220cc;border-bottom:1px solid var(--line);backdrop-filter:blur(6px);padding:10px 16px;z-index:10}
h1{margin:0;font-size:18px}
.container{max-width:1100px;margin:16px auto;padding:0 16px}
.card{background:#0e1525a0;border:1px solid #1f2a3a;border-radius:var(--r);padding:16px;margin:12px 0;box-shadow:0 8px 24px #0006}
.row{display:flex;gap:8px;flex-wrap:wrap}
input,select,textarea,button{background:#0b1220;color:var(--ink);border:1px solid #1f2937;border-radius:10px;padding:10px 12px}
button{cursor:pointer}
.btn{background:var(--acc);color:#1a1a1a;border-color:#6a5f00}
.btn.outline{background:transparent;color:var(--ink)}
.btn.danger{background:#3a0b0b;color:#fbb;border-color:#6a1a1a}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
table{width:100%;border-collapse:collapse}
th,td{border-bottom:1px solid #1f2a3a;padding:8px 10px;text-align:left}
.badge{display:inline-block;padding:2px 8px;border:1px solid #2b3b52;border-radius:999px;color:#9fb0c5;margin-right:6px}
.small{color:var(--muted);font-size:12px}
img.thumb{width:40px;height:40px;border-radius:8px;object-fit:cover;border:1px solid #22324d;background:#111}
</style>
</head>
<body>
<header>
  <h1>Editor de <code>data.json</code> · Servicios Pro</h1>
</header>

<div class="container">

  <!-- Cargar JSON -->
  <section class="card">
    <h2>1) Cargar</h2>
    <div class="row">
      <label class="btn outline">
        Importar archivo JSON
        <input id="fileInput" type="file" accept="application/json" hidden>
      </label>
      <input id="urlInput" placeholder="o pega URL RAW de GitHub… (https://raw.githubusercontent.com/.../data.json)" style="flex:1">
      <button id="fetchBtn" class="btn">Cargar desde URL</button>
      <button id="seedBtn" class="btn outline">Plantilla nueva</button>
    </div>
    <p class="small" id="meta"></p>
  </section>

  <!-- Filtros -->
  <section class="card">
    <h2>2) Lista de profesionales</h2>
    <div class="row">
      <select id="fCategory"><option value="">Todas las categorías</option></select>
      <select id="fTown"><option value="">Todos los pueblos</option></select>
      <input id="fQuery" type="search" placeholder="Buscar por nombre/servicios…">
      <button id="filterBtn" class="btn outline">Filtrar</button>
      <button id="clearBtn" class="btn outline">Limpiar</button>
      <span class="small" id="count"></span>
    </div>
    <div style="overflow:auto">
      <table id="tbl">
        <thead>
          <tr>
            <th>Foto</th><th>Nombre</th><th>Teléfono</th><th>Categoría</th><th>Pueblo</th><th>Servicios</th><th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- Formulario -->
  <section class="card">
    <h2>3) Nuevo / Editar</h2>
    <form id="proForm" class="grid">
      <input type="hidden" id="proId">
      <label>Nombre
        <input id="proName" required>
      </label>
      <label>Teléfono
        <input id="proPhone" required placeholder="787-555-1234">
      </label>
      <label>Categoría
        <select id="proCategory" required></select>
      </label>
      <label>Pueblo
        <select id="proTown" required></select>
      </label>
      <label>Servicios (coma separada)
        <input id="proServices" placeholder="Minisplit, Pintura interior, Frenos…">
      </label>
      <label>Descripción
        <textarea id="proBio" rows="3"></textarea>
      </label>
      <label>Foto (archivo o URL)
        <input id="proPhoto" type="file" accept="image/*">
        <input id="proPhotoUrl" placeholder="https://... (opcional)">
      </label>
      <div class="row">
        <button class="btn" type="submit">Guardar</button>
        <button id="newBtn" class="btn outline" type="button">Nuevo</button>
        <button id="delBtn" class="btn danger" type="button">Eliminar</button>
      </div>
    </form>
  </section>

  <!-- Exportar -->
  <section class="card">
    <h2>4) Exportar</h2>
    <div class="row">
      <button id="bumpBtn" class="btn">Subir versión +1</button>
      <button id="exportBtn" class="btn">Descargar data.json</button>
      <span class="small">Luego sube este archivo a GitHub y reemplaza el <code>data.json</code> del sitio.</span>
    </div>
  </section>

</div>

<script src="json-tool.js"></script>
</body>
</html>
